<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chat with Astrologer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.pubnub.com/sdk/javascript/pubnub.7.2.0.min.js"></script>

<style>
body{margin:0;font-family:system-ui;background:#f4f4f4;height:100vh;display:flex;flex-direction:column}
.header{background:#F8CFAF;padding:14px;font-weight:700}
.chat{flex:1;padding:12px;overflow:auto}
.msg{max-width:75%;padding:10px;border-radius:12px;margin-bottom:8px}
.me{background:#ffe0cc;margin-left:auto}
.them{background:#fff}
.controls{display:flex;padding:10px;gap:8px;background:#fff}
input{flex:1;padding:10px;border-radius:20px;border:1px solid #ccc}
button{padding:10px 16px;border-radius:20px;border:none;background:#F8CFAF;font-weight:700}
</style>
</head>

<body>

<div class="header">Chat with Astrologer Gautam</div>

<div id="chat" class="chat"></div>

<div class="controls">
  <input id="msg" placeholder="Type messageâ€¦" />
  <button onclick="send()">Send</button>
</div>

<script>
const CHANNEL = "astro_gautam_chat";

const pubnub = new PubNub({
  publishKey: "pub-c-a90a128a-4e77-4b6a-bbb3-59d0fb688ddc",
  subscribeKey: "sub-c-1b514e35-fab1-4baf-88f1-6b628ab7e9c2",
  uuid: "customer_" + Math.random().toString(36).slice(2,6)
});

pubnub.subscribe({ channels: [CHANNEL] });

pubnub.addListener({
  message: e => {
    if(e.message.sender === pubnub.getUUID()) return;
    add(e.message.text, "them");
  }
});

function send(){
  const text = msg.value.trim();
  if(!text) return;
  msg.value="";
  add(text,"me");

  pubnub.publish({
    channel: CHANNEL,
    message: {
      sender: pubnub.getUUID(),
      text
    }
  });
}

function add(text, cls){
  const d=document.createElement("div");
  d.className="msg "+cls;
  d.textContent=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}
</script>

</body>
</html>






